apiVersion: v1
kind: Pod
spec:
  volumes:
    # - name: spark-sleep-init-script
    #   configMap:
    #     name: spark-sleep-init-script
    #     defaultMode: 0500
    - name: shared-volume
      emptyDir: {}
  containers:
  - name: spark-kubernetes-executor # This will be interpreted as executor Spark main container
    env:
      - name: SPARK_EXECUTOR_TEMPLATE
        value: "spark-sleep"
    volumeMounts:
      - name: shared-volume
        mountPath: /var/data
  # - name: spark-sleep-sidecar
  #   image: ubuntu:latest
  #   # Just sleep forever
  #   command: [ "sleep" ]
  #   args: [ "infinity" ]
  # initContainers:
  # - name: spark-init-container-executor # Init container
  #   image: centos:latest
  #   volumeMounts:
  #     - name: spark-sleep-init-script
  #       mountPath: "/script"
  #   command: ["/script/spark-sleep-init-script.sh"]
