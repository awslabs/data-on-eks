---
sidebar_position: 1
sidebar_label: Spark基准测试简介
---

# Amazon EKS上的Spark基准测试简介 🚀

本指南将引导您在Amazon EKS（AWS的托管Kubernetes服务）上运行Apache Spark基准测试。基准测试有助于评估和优化EKS上的Spark工作负载，比较在不同EC2实例系列的Graviton实例上运行的基准测试结果，特别是在扩展性能、成本效益和可靠性方面。
主要特点 📈

- 基准测试的数据生成
- 在不同代Graviton实例（r6g、r7g、r8g）上执行基准测试
- 基准测试结果
- 可定制的基准测试以适应您的工作负载
- 自动扩展和成本优化策略

## 📊 Spark的TPC-DS基准测试

TPC-DS基准测试是由交易处理性能委员会（TPC）创建的行业标准基准测试，用于评估决策支持系统的性能。它被广泛用于评估基于SQL的数据处理引擎在处理复杂分析查询方面的效率。Databricks已经为Apache Spark优化了TPC-DS，使其与评估云和本地环境中的Spark工作负载高度相关。

TPC-DS基准测试涵盖了一系列复杂的、数据密集型查询，这些查询模拟了现实的决策支持系统，使其成为评估Spark处理结构化和半结构化数据性能的理想选择。

📈 关于Spark的TPC-DS基准测试的一些详细信息

Databricks上的Spark的TPC-DS基准测试包括以下特点和考虑因素：

- 数据集大小：TPC-DS提供标准化的数据集，范围从几个千兆字节到多个太字节，允许用户测试Spark的可扩展性。
- 查询套件：基准测试包括99个模拟真实世界决策支持场景的查询。这些查询测试Spark高效处理连接、聚合和复杂嵌套查询的能力。
- 优化技术：Databricks实施了各种Spark特定的优化，以提高TPC-DS查询性能，如Catalyst优化器、自适应查询执行（AQE）和优化的洗牌操作。
- 执行环境：基准测试通常在分布式环境和云平台（如Amazon EKS）中运行，利用为Apache Spark优化的运行时。

**注意：** Spark上的TPC-DS基准测试结果可能会根据集群配置、实例类型和Spark设置而有显著差异。

### ✨ 为什么我们需要基准测试

基准测试对于以下原因至关重要：

- 性能评估：它们提供了一个客观的衡量标准，用于评估和比较Spark引擎在各种云和硬件配置上的速度、效率和可扩展性。

- 优化见解：通过分析基准测试结果，用户可以获得关于Spark可能被优化以处理大规模、复杂分析查询的特定领域的见解。

- 基础设施比较：在Amazon EKS上运行Spark的TPC-DS允许团队做出数据驱动的决策，选择最适合其数据工作负载的平台。

- 运营准备：确保Spark设置已准备好处理大型数据集和复杂的分析任务，减少生产环境中的风险。

### 🎁 我们提供什么

通过Data-on-EKS蓝图，我们提供

- 可直接部署的基础设施即代码（Terraform）模板
- 基准测试数据生成工具包
- 基准测试执行工具包

### 💰 关于成本的说明

为了最小化成本，我们建议在基准数据生成工具包完成执行并且数据已成功存储在S3存储桶后终止`C5d`实例。这种方法确保资源仅在必要时使用，有助于控制费用。

## 🔗 其他资源

[TPCDS规范](https://www.tpc.org/tpcds/default5.asp)
