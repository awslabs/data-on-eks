---
sidebar_position: 3
sidebar_label: Kubeflow Spark Operator åŸºå‡†æµ‹è¯•
---

# Kubeflow Spark Operator åŸºå‡†æµ‹è¯• ğŸš€
æœ¬æ–‡æ¡£ä½œä¸ºåœ¨ Amazon EKS ä¸Šå¯¹ Kubeflow Spark Operator è¿›è¡Œè§„æ¨¡æµ‹è¯•çš„ç»¼åˆæŒ‡å—ã€‚ä¸»è¦ç›®æ ‡æ˜¯é€šè¿‡æäº¤æ•°åƒä¸ªä½œä¸šå¹¶åˆ†æå…¶åœ¨å‹åŠ›ä¸‹çš„è¡Œä¸ºï¼Œè¯„ä¼° Spark Operator åœ¨é‡è´Ÿè½½ä¸‹çš„æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§ã€‚

æœ¬æŒ‡å—æä¾›äº†åˆ†æ­¥æ–¹æ³•ï¼š

- **é…ç½® Spark Operator** è¿›è¡Œå¤§è§„æ¨¡ä½œä¸šæäº¤çš„æ­¥éª¤ã€‚
- æ€§èƒ½ä¼˜åŒ–çš„**åŸºç¡€è®¾æ–½è®¾ç½®**ä¿®æ”¹ã€‚
- ä½¿ç”¨ **Locust** çš„è´Ÿè½½æµ‹è¯•æ‰§è¡Œè¯¦ç»†ä¿¡æ¯ã€‚
- ç”¨äºç›‘æ§ Spark Operator æŒ‡æ ‡å’Œ Kubernetes æŒ‡æ ‡çš„ **Grafana ä»ªè¡¨æ¿**

### âœ¨ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åŸºå‡†æµ‹è¯•
åŸºå‡†æµ‹è¯•æ˜¯è¯„ä¼° Spark Operator åœ¨å¤„ç†å¤§è§„æ¨¡ä½œä¸šæäº¤æ—¶çš„æ•ˆç‡å’Œå¯é æ€§çš„å…³é”®æ­¥éª¤ã€‚è¿™äº›æµ‹è¯•æä¾›äº†æœ‰ä»·å€¼çš„è§è§£ï¼š

- **è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼š** ç¡®å®šç³»ç»Ÿåœ¨é‡è´Ÿè½½ä¸‹é‡åˆ°å›°éš¾çš„åŒºåŸŸã€‚
- **ç¡®ä¿ä¼˜åŒ–çš„èµ„æºåˆ©ç”¨ç‡ï¼š** ç¡®ä¿ CPUã€å†…å­˜å’Œå…¶ä»–èµ„æºå¾—åˆ°æœ‰æ•ˆåˆ©ç”¨ã€‚
- **è¯„ä¼°é‡è´Ÿè½½ä¸‹çš„ç³»ç»Ÿç¨³å®šæ€§ï¼š** æµ‹è¯•ç³»ç»Ÿåœ¨æç«¯æ¡ä»¶ä¸‹ç»´æŒæ€§èƒ½å’Œå¯é æ€§çš„èƒ½åŠ›ã€‚

é€šè¿‡è¿›è¡Œè¿™äº›æµ‹è¯•ï¼Œæ‚¨å¯ä»¥ç¡®ä¿ Spark Operator èƒ½å¤Ÿæœ‰æ•ˆå¤„ç†ç°å®ä¸–ç•Œçš„é«˜éœ€æ±‚åœºæ™¯ã€‚

### å…ˆå†³æ¡ä»¶

- åœ¨è¿è¡ŒåŸºå‡†æµ‹è¯•ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²æŒ‰ç…§[æ­¤å¤„](https://awslabs.github.io/data-on-eks/docs/blueprints/data-analytics/spark-operator-yunikorn#deploy)çš„è¯´æ˜éƒ¨ç½²äº† **Spark Operator** EKS é›†ç¾¤ã€‚
- è®¿é—®å¿…è¦çš„ AWS èµ„æºå’Œä¿®æ”¹ EKS é…ç½®çš„æƒé™ã€‚
- ç†Ÿæ‚‰ **Terraform**ã€**Kubernetes** å’Œç”¨äºè´Ÿè½½æµ‹è¯•çš„ **Locust**ã€‚

### é›†ç¾¤æ›´æ–°

ä¸ºäº†å‡†å¤‡é›†ç¾¤è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œåº”ç”¨ä»¥ä¸‹ä¿®æ”¹ï¼š

**æ­¥éª¤ 1ï¼šæ›´æ–° Spark Operator Helm é…ç½®**

åœ¨æ–‡ä»¶ [analytics/terraform/spark-k8s-operator/addons.tf](https://github.com/awslabs/data-on-eks/blob/main/analytics/terraform/spark-k8s-operator/addons.tf) ä¸­å–æ¶ˆæ³¨é‡ŠæŒ‡å®šçš„ Spark Operator Helm å€¼ï¼ˆä» `-- Start` åˆ° `-- End` éƒ¨åˆ†ï¼‰ã€‚ç„¶åï¼Œè¿è¡Œ terraform apply ä»¥åº”ç”¨æ›´æ”¹ã€‚

è¿™äº›æ›´æ–°ç¡®ä¿ï¼š
- Spark Operator å’Œ webhook Pod ä½¿ç”¨ Karpenter éƒ¨ç½²åœ¨ä¸“ç”¨çš„ `c5.9xlarge` å®ä¾‹ä¸Šã€‚
- å®ä¾‹æä¾› `36 vCPU` æ¥å¤„ç† `6000` ä¸ªåº”ç”¨ç¨‹åºæäº¤ã€‚
- ä¸ºæ§åˆ¶å™¨ Pod å’Œ Webhook Pod åˆ†é…é«˜ CPU å’Œå†…å­˜èµ„æºã€‚

ä»¥ä¸‹æ˜¯æ›´æ–°çš„é…ç½®ï¼š

```yaml
enable_spark_operator = true
  spark_operator_helm_config = {
    version = "2.1.0"
    timeout = "120"
