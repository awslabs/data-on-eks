---
sidebar_position: 1
sidebar_label: Spark 벤치마크 소개
---

# Amazon EKS에서의 Spark 벤치마크 소개

이 가이드는 AWS의 관리형 Kubernetes 서비스인 Amazon EKS에서 Apache Spark 벤치마크 테스트를 실행하는 방법을 안내합니다. 벤치마크 테스트는 특히 성능, 비용 효율성 및 신뢰성을 위해 스케일링할 때 EKS에서 Spark 워크로드를 평가하고 최적화하여 다양한 Graviton 인스턴스 EC2 인스턴스 패밀리에서 실행된 벤치마크 결과를 비교하는 데 도움이 됩니다.
주요 기능

- 벤치마크 테스트용 데이터 생성
- 다양한 세대의 Graviton 인스턴스(r6g, r7g, r8g)에서 벤치마크 테스트 실행
- 벤치마크 결과
- 워크로드에 맞는 사용자 정의 벤치마크
- 오토스케일링 및 비용 최적화 전략

## TPC-DS Spark 벤치마크

TPC-DS 벤치마크는 의사 결정 지원 시스템의 성능을 평가하기 위해 Transaction Processing Performance Council(TPC)에서 만든 업계 표준 벤치마크입니다. SQL 기반 데이터 처리 엔진이 복잡한 분석 쿼리를 처리하는 효율성을 평가하는 데 널리 사용됩니다. Databricks는 Apache Spark용으로 TPC-DS를 최적화하여 클라우드 및 온프레미스 환경에서 Spark 워크로드를 평가하는 데 매우 적합합니다.

TPC-DS 벤치마크 테스트는 실제 의사 결정 지원 시스템을 시뮬레이션하는 복잡하고 데이터 집약적인 쿼리 범위를 다루며, 구조화되고 반구조화된 데이터로 Spark 성능을 평가하는 데 이상적입니다.

Spark용 TPC-DS 벤치마크의 일부 세부 사항

Databricks의 Spark용 TPC-DS 벤치마크에는 다음 기능 및 고려 사항이 포함됩니다:

- 데이터셋 크기: TPC-DS는 수 기가바이트에서 여러 테라바이트에 이르는 표준화된 데이터셋을 제공하여 사용자가 Spark의 확장성을 테스트할 수 있습니다.
- 쿼리 스위트: 벤치마크에는 실제 의사 결정 지원 시나리오를 시뮬레이션하는 99개의 쿼리가 포함됩니다. 이러한 쿼리는 Spark가 조인, 집계 및 복잡한 중첩 쿼리를 효율적으로 처리하는 능력을 테스트합니다.
- 최적화 기법: Databricks는 Catalyst Optimizer, Adaptive Query Execution(AQE) 및 최적화된 셔플 연산과 같은 다양한 Spark 특정 최적화를 구현하여 TPC-DS 쿼리 성능을 향상시켰습니다.
- 실행 환경: 벤치마크 테스트는 일반적으로 분산 환경과 클라우드 플랫폼(예: Amazon EKS)에서 실행되며, Apache Spark용으로 최적화된 런타임을 활용합니다.

**참고:** Spark의 TPC-DS 벤치마크 결과는 클러스터 구성, 인스턴스 유형 및 Spark 설정에 따라 상당히 달라질 수 있습니다.

### 벤치마크 테스트가 필요한 이유

벤치마크 테스트는 다음과 같은 이유로 중요합니다:

- 성능 평가: 다양한 클라우드 및 하드웨어 구성에서 Spark 엔진의 속도, 효율성 및 확장성을 평가하고 비교하는 객관적인 척도를 제공합니다.

- 최적화 인사이트: 벤치마크 결과를 분석하여 사용자는 Spark가 대규모의 복잡한 분석 쿼리를 처리하도록 최적화될 수 있는 특정 영역에 대한 인사이트를 얻을 수 있습니다.

- 인프라 비교: Amazon EKS에서 Spark의 TPC-DS를 실행하면 팀이 데이터 워크로드에 가장 적합한 플랫폼에 대해 데이터 기반 결정을 내릴 수 있습니다.

- 운영 준비성: Spark 설정이 대규모 데이터셋과 복잡한 분석 작업을 처리할 준비가 되었는지 확인하여 프로덕션 환경에서의 위험을 줄입니다.

### 제공 내용

Data-on-EKS 블루프린트를 통해 다음을 제공합니다

- 배포 준비가 완료된 Infrastructure-as-Code(Terraform) 템플릿
- 벤치마크 테스트 데이터 생성 툴킷
- 벤치마크 실행 툴킷

### 비용에 대한 참고 사항

비용을 최소화하려면 벤치마크 데이터 생성 툴킷 실행이 완료되고 데이터가 S3 버킷에 성공적으로 저장된 후 `C5d` 인스턴스를 종료하는 것을 권장합니다. 이 접근 방식은 필요할 때만 리소스를 사용하도록 하여 비용을 통제하는 데 도움이 됩니다.

## 추가 리소스

[TPCDS 사양](https://www.tpc.org/tpcds/default5.asp)
