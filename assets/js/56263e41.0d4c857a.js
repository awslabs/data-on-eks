"use strict";(self.webpackChunkdoeks_website=self.webpackChunkdoeks_website||[]).push([["5751"],{36556:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>a,default:()=>h,toc:()=>l,metadata:()=>i,assets:()=>c,contentTitle:()=>o});var i=JSON.parse('{"id":"blueprints/distributed-databases/trino","title":"Deploying Trino on EKS","description":"Introduction","source":"@site/docs/blueprints/distributed-databases/trino.md","sourceDirName":"blueprints/distributed-databases","slug":"/blueprints/distributed-databases/trino","permalink":"/data-on-eks/docs/blueprints/distributed-databases/trino","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/data-on-eks/blob/main/website/docs/blueprints/distributed-databases/trino.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Trino on EKS"},"sidebar":"blueprints","previous":{"title":"Apache Pinot","permalink":"/data-on-eks/docs/blueprints/distributed-databases/pinot"},"next":{"title":"ClickHouse","permalink":"/data-on-eks/docs/blueprints/distributed-databases/clickhouse"}}'),r=s(85893),t=s(50065);let a={sidebar_position:3,sidebar_label:"Trino on EKS"},o="Deploying Trino on EKS",c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Blueprint Solution",id:"blueprint-solution",level:2},{value:"Deploying the Solution",id:"deploying-the-solution",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Deploy the EKS Cluster with Trino",id:"deploy-the-eks-cluster-with-trino",level:3},{value:"Verify Deployment",id:"verify-deployment",level:3},{value:"Output",id:"output",level:4},{value:"Output",id:"output-1",level:4},{value:"Using Trino for database querying executions",id:"using-trino-for-database-querying-executions",level:2},{value:"Example #1: Using the Hive Connector",id:"example-1-using-the-hive-connector",level:3},{value:"Setup",id:"setup",level:4},{value:"Running the queries",id:"running-the-queries",level:4},{value:"Output",id:"output-2",level:4},{value:"Output",id:"output-3",level:4},{value:"Output",id:"output-4",level:4},{value:"Output",id:"output-5",level:4},{value:"Cleaning Up Hive Resources",id:"cleaning-up-hive-resources",level:4},{value:"Example #2: Using the Iceberg Connector",id:"example-2-using-the-iceberg-connector",level:3},{value:"Running the queries",id:"running-the-queries-1",level:4},{value:"Output",id:"output-6",level:4},{value:"Output",id:"output-7",level:4},{value:"Example #3 (Optional): Fault-tolerant execution in Trino",id:"example-3-optional-fault-tolerant-execution-in-trino",level:3},{value:"Output",id:"output-8",level:4},{value:"Output",id:"output-9",level:4},{value:"Cleaning Up Iceberg Resources",id:"cleaning-up-iceberg-resources",level:4},{value:"Cleanup \uD83E\uDDF9",id:"cleanup-",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components},{Details:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploying-trino-on-eks",children:"Deploying Trino on EKS"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://trino.io/",children:"Trino"})," is an open-source, fast, distributed query engine designed to run SQL queries for big data analytics, over a multitude of data sources including Amazon S3, relational databases, distributed data stores and data warehouses."]}),"\n",(0,r.jsxs)(n.p,{children:["When Trino executes a query, it does so by breaking up the execution into a hierarchy of stages, which are implemented as a series of tasks distributed over a network of Trino workers. A Trino cluster consists of a coordinator and many workers for parallel processing, which can be deployed as Kubernetes pods on an EKS cluster. The coordinator and the workers collaborate to access connected data sources, with schemas and references stored in a catalog. To access the data sources, you can use one of the many ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/connector.html",children:"connectors"})," provided by Trino to adapt Trino. Examples include as Hive, Iceberg and Kafka. More details about Trino project can be found on this ",(0,r.jsx)(n.a,{href:"https://trino.io",children:"link"})]}),"\n",(0,r.jsx)(n.h2,{id:"blueprint-solution",children:"Blueprint Solution"}),"\n",(0,r.jsxs)(n.p,{children:["This blueprint will deploy Trino on an EKS cluster (Kubernetes version 1.29) with nodes provisioned using Karpenter (v0.34.0). To optimize on cost and performance, Karpenter will provision On-demand nodes for the Trino coordinator and EC2 Spot instances for Trino workers. With Trino's multi-architectural container images, Karpenter ",(0,r.jsx)(n.a,{href:"https://karpenter.sh/v0.34/concepts/nodepools/",children:"NodePool"})," will allow provisioning of nodes with EC2 instances from different cpu architectures including AWS Graviton based instances. Trino is deployed using the ",(0,r.jsx)(n.a,{href:"https://trinodb.github.io/charts/charts/trino/",children:"official Helm chart"}),", with custom values provided for users to leverage Hive and Iceberg connectors. The examples will use Glue and Iceberg tables on AWS as the backend data source, using S3 as the storage."]}),"\n",(0,r.jsx)(n.h2,{id:"deploying-the-solution",children:"Deploying the Solution"}),"\n",(0,r.jsx)(n.p,{children:"Let's go through the deployment steps."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Ensure that you have installed the following tools on your machine."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html",children:"aws cli"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://Kubernetes.io/docs/tasks/tools/",children:"kubectl"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli",children:"terraform"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/client/cli.html",children:"Trino CLI client"})}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:" Toggle to see installation steps of Trino CLI"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget https://repo1.maven.org/maven2/io/trino/trino-cli/427/trino-cli-427-executable.jar\nmv trino-cli-427-executable.jar trino\nchmod +x trino\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"deploy-the-eks-cluster-with-trino",children:"Deploy the EKS Cluster with Trino"}),"\n",(0,r.jsx)(n.p,{children:"First, clone the repository"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/awslabs/data-on-eks.git\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Navigate into ",(0,r.jsx)(n.code,{children:"distributed-databases/trino"})," and run ",(0,r.jsx)(n.code,{children:"install.sh"})," script. Enter, when prompted, the AWS region you want to provision the resources to (for example, ",(0,r.jsx)(n.code,{children:"us-west-2"}),")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd data-on-eks/distributed-databases/trino\n\n./install.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"verify-deployment",children:"Verify Deployment"}),"\n",(0,r.jsx)(n.p,{children:"Verify the Amazon EKS Cluster"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"#Select your own region where you deployed resources\naws eks describe-cluster --name trino-on-eks --region us-west-2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Update local kubeconfig so we can access kubernetes cluster (you can also get this command from the terraform output ",(0,r.jsx)(n.code,{children:"configure_kubectl"})," )"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aws eks update-kubeconfig --name trino-on-eks --region us-west-2\n"})}),"\n",(0,r.jsx)(n.p,{children:"First, let's verify that we have worker nodes provisioned by Karpenter in the cluster. Let's also see their availability zone and capacity type (on-demand or spot)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get nodes --selector=karpenter.sh/nodepool=trino-sql-karpenter -L topology.kubernetes.io/zone -L karpenter.sh/capacity-type -L node.kubernetes.io/instance-type\n"})}),"\n",(0,r.jsx)(n.h4,{id:"output",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"NAME                                        STATUS   ROLES    AGE   VERSION               ZONE         CAPACITY-TYPE   INSTANCE-TYPE\nip-10-1-11-49.us-west-2.compute.internal    Ready    <none>   24m   v1.29.0-eks-5e0fdde   us-west-2b   on-demand       t4g.medium\n"})}),"\n",(0,r.jsx)(n.p,{children:"We can see above that Karpenter provisioned on-demand node for running Trino coordinator."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"For a distributed Big Data query engine like Trino which runs on a massively parallel processing cluster, it is recommended to deploy the cluster in same availability zone to avoid incurring high Inter-AZ Data Transfer costs. That's why Karpenter NodePool has been configured to launch EKS nodes in same AZ"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, let's verify the coordinator and worker pods running in ",(0,r.jsx)(n.code,{children:"trino"})," namespace"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get pods --namespace=trino\n"})}),"\n",(0,r.jsx)(n.h4,{id:"output-1",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"NAME                                 READY   STATUS    RESTARTS   AGE\ntrino-coordinator-5cfd685c8f-mchff   1/1     Running   0          37m\n"})}),"\n",(0,r.jsx)(n.p,{children:"Next, we will port-forward the trino service so it can be accessed locally"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl -n trino port-forward service/trino 8080:8080\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, lets access the Trino UI at ",(0,r.jsx)(n.code,{children:"http://localhost:8080"})," through web browser and login with username ",(0,r.jsx)(n.code,{children:"admin"})," in the login window as shown below:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Trino UI Login",src:s(31950).Z+"",width:"411",height:"328"})}),"\n",(0,r.jsx)(n.p,{children:"Trino Web UI will show 0 active worker:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Trino UI",src:s(5964).Z+"",width:"1189",height:"548"})}),"\n",(0,r.jsx)(n.h2,{id:"using-trino-for-database-querying-executions",children:"Using Trino for database querying executions"}),"\n",(0,r.jsx)(n.h3,{id:"example-1-using-the-hive-connector",children:"Example #1: Using the Hive Connector"}),"\n",(0,r.jsx)(n.p,{children:"In this example, we will set up a Hive metastore using AWS Glue, with the source data stored in S3, and crawler that will infer schema from it to build a Glue table."}),"\n",(0,r.jsx)(n.p,{children:"Using Trino on EKS with the Glue connector, we will use Trino CLI to run sample SQL queries to retrieve data."}),"\n",(0,r.jsx)(n.h4,{id:"setup",children:"Setup"}),"\n",(0,r.jsxs)(n.p,{children:["Run the hive script from the ",(0,r.jsx)(n.code,{children:"examples"})," directory to set up the blueprint S3 bucket with the 2022 NYC Taxi dataset (in Parquet), and build Glue metastore:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd examples/\n./hive-setup.sh\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You will see some outputs to show progress, and if successful, will see the name of the Glue table that will store the metadata as ",(0,r.jsx)(n.code,{children:"hive"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"running-the-queries",children:"Running the queries"}),"\n",(0,r.jsx)(n.p,{children:"You should have the Trino CLI installed as part of the prerequisite. The blueprint has the Hive Connector configured with the bucket we set up in the previous section, so you should be able to query the data source without additional settings."}),"\n",(0,r.jsx)(n.p,{children:"First, port-forward your trino service to access it locally, if you have closed the session from previous section:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kubectl -n trino port-forward service/trino 8080:8080\n"})}),"\n",(0,r.jsx)(n.p,{children:"While the port-forward is running, open another terminal tab where you have Trino CLI and run the following command to access the coordinator:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./trino http://127.0.0.1:8080 --user admin\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once successful, you will be able to get a prompt to execute commands. You can use ",(0,r.jsx)(n.code,{children:"help"})," command to see a list of supported commands.  The first command you run will trigger the auto-scaling of trino workers from 0 to 1, and take a couple minutes to complete."]}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsxs)(n.p,{children:["To show a list of catalogs, run query - ",(0,r.jsx)(n.code,{children:"SHOW CATALOGS;"})," and you can see ",(0,r.jsx)(n.code,{children:"hive"})," and ",(0,r.jsx)(n.code,{children:"iceberg"})," catalogs among others configured by the blueprint"]}),"\n",(0,r.jsx)(n.h4,{id:"output-2",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:" Catalog\n---------\n hive\n iceberg\n system\n tpcds\n tpch\n(5 rows)\n\nQuery 20240215_200117_00003_6jdxw, FINISHED, 1 node\nSplits: 1 total, 1 done (100.00%)\n0.49 [0 rows, 0B] [0 rows/s, 0B/s]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To see the schemas (databases) in Hive catalog, run query - ",(0,r.jsx)(n.code,{children:"SHOW SCHEMAS FROM hive;"})," :"]}),"\n",(0,r.jsx)(n.h4,{id:"output-3",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"  Schema\n--------------------\n information_schema\n taxi_hive_database\n(2 rows)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Let's use ",(0,r.jsx)(n.code,{children:"taxi_hive_database"})," and show table in this database -"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"USE hive.taxi_hive_database;\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SHOW TABLES;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"output-4",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Table\n-------\nhive\n(1 row)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Finally, to run a simple query to list items - ",(0,r.jsx)(n.code,{children:"SELECT * FROM hive LIMIT 5;"})]}),"\n",(0,r.jsx)(n.h4,{id:"output-5",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"vendorid |  tpep_pickup_datetime   |  tpep_dropoff_datetime  | passenger_count | trip_distance | ratecodeid | store_and_fwd_flag | pulocationid | dolocation>\n----------+-------------------------+-------------------------+-----------------+---------------+------------+--------------------+--------------+-----------\x3e\n        1 | 2022-09-01 00:28:12.000 | 2022-09-01 00:36:22.000 |             1.0 |           2.1 |        1.0 | N                  |          100 |          2>\n        1 | 2022-11-01 00:24:49.000 | 2022-11-01 00:31:04.000 |             2.0 |           1.0 |        1.0 | N                  |          158 |          1>\n        1 | 2022-11-01 00:37:32.000 | 2022-11-01 00:42:23.000 |             2.0 |           0.8 |        1.0 | N                  |          249 |          1>\n        2 | 2022-09-01 00:02:24.000 | 2022-09-01 00:09:39.000 |             1.0 |          1.32 |        1.0 | N                  |          238 |          1>\n        2 | 2022-09-01 00:47:25.000 | 2022-09-01 00:56:09.000 |             1.0 |          2.94 |        1.0 | N                  |\n"})}),"\n",(0,r.jsx)(n.h4,{id:"cleaning-up-hive-resources",children:"Cleaning Up Hive Resources"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Exit from Trino CLI with ",(0,r.jsx)(n.code,{children:"exit"})," command."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Run the cleanup script from the ",(0,r.jsx)(n.code,{children:"examples"})," directory to delete all the resources created from the hive script:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cd data-on-eks/distributed-databases/trino/examples\n./hive-cleanup.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"example-2-using-the-iceberg-connector",children:"Example #2: Using the Iceberg Connector"}),"\n",(0,r.jsx)(n.p,{children:"In this example, we will set up using Apache Iceberg with AWS Glue as the catalog type, and will store the data in Amazon S3 with PARQUET format."}),"\n",(0,r.jsx)(n.p,{children:"Using Trino on EKS with the Iceberg connector, we will use Trino CLI to create the above resources and run sample SQL queries to insert and retrieve data."}),"\n",(0,r.jsx)(n.h4,{id:"running-the-queries-1",children:"Running the queries"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Let's find out the S3 data bucket created by blueprint. We will use this bucket to store data in Iceberg tables in PARQUET format."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'cd data-on-eks/distributed-databases/trino\nexport BUCKET=$(terraform output --state="./terraform.tfstate" --raw data_bucket)\necho $BUCKET\n'})}),"\n",(0,r.jsx)(n.h4,{id:"output-6",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"trino-data-bucket-20240215180855515400000001\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Let\u2019s now create an Iceberg schema with tables populated with data from sf10000 schema tables of ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/connector/tpcds.html",children:"TPCDS"}),". We will use CREATE TABLE AS SELECT (CTAS) statements. The SQL file ",(0,r.jsx)(n.code,{children:"examples/trino_sf10000_tpcds_to_iceberg.sql"})," has the below SQL statements:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"use tpcds.sf10000;\nselect * from tpcds.sf10000.item limit 10;\nselect * from tpcds.sf10000.warehouse limit 10;\n\n/* Drop tables & schema */\n\ndrop schema iceberg.iceberg_schema;\ndrop table iceberg.iceberg_schema.warehouse;\ndrop table iceberg.iceberg_schema.item;\ndrop table iceberg.iceberg_schema.inventory;\ndrop table iceberg.iceberg_schema.date_dim;\n\n/* Iceberg schema creation */\n\ncreate schema if not exists iceberg.iceberg_schema\nwith (LOCATION = 's3://trino-data-bucket-20240215180855515400000001/iceberg/');\n\n/* Iceberg Table Creation with CTAS from tpcds tables */\n\ncreate table if not exists iceberg.iceberg_schema.inventory\nwith (FORMAT = 'PARQUET')\nas select *\nfrom tpcds.sf10000.inventory;\n\ncreate table if not exists iceberg.iceberg_schema.date_dim\nwith (FORMAT = 'PARQUET')\nas select d_date_sk,\ncast(d_date_id as varchar(16)) as d_date_id,\nd_date,\nd_month_seq,\nd_week_seq,\nd_quarter_seq,\nd_year,\nd_dow,\nd_moy,\nd_dom,\nd_qoy,\nd_fy_year,\nd_fy_quarter_seq,\nd_fy_week_seq,\ncast(d_day_name as varchar(9)) as d_day_name,\ncast(d_quarter_name as varchar(6)) as d_quarter_name,\ncast(d_holiday as varchar(1)) as d_holiday,\ncast(d_weekend as varchar(1)) as d_weekend,\ncast(d_following_holiday as varchar(1)) as d_following_holiday,\nd_first_dom,\nd_last_dom,\nd_same_day_ly,\nd_same_day_lq,\ncast(d_current_day as varchar(1)) as d_current_day,\ncast(d_current_week as varchar(1)) as d_current_week,\ncast(d_current_month as varchar(1)) as d_current_month,\ncast(d_current_quarter as varchar(1)) as d_current_quarter\nfrom tpcds.sf10000.date_dim;\n\ncreate table if not exists iceberg.iceberg_schema.warehouse\nwith (FORMAT = 'PARQUET')\nas select\nw_warehouse_sk,\ncast(w_warehouse_id as varchar(16)) as w_warehouse_id,\nw_warehouse_name,\nw_warehouse_sq_ft,\ncast(w_street_number as varchar(10)) as w_street_number,\nw_street_name,\ncast(w_street_type as varchar(15)) as w_street_type,\ncast(w_suite_number as varchar(10)) as w_suite_number,\nw_city,\nw_county,\ncast(w_state as varchar(2)) as w_state,\ncast(w_zip as varchar(10)) as w_zip,\nw_country,\nw_gmt_offset\nfrom tpcds.sf10000.warehouse;\n\ncreate table if not exists iceberg.iceberg_schema.item\nwith (FORMAT = 'PARQUET')\nas select\ni_item_sk,\ncast(i_item_id as varchar(16)) as i_item_id,\ni_rec_start_date,\ni_rec_end_date,\ni_item_desc,\ni_current_price,\ni_wholesale_cost,\ni_brand_id,\ncast(i_brand as varchar(50)) as i_brand,\ni_class_id,\ncast(i_class as varchar(50)) as i_class,\ni_category_id,\ncast(i_category as varchar(50)) as i_category,\ni_manufact_id,\ncast(i_manufact as varchar(50)) as i_manufact,\ncast(i_size as varchar(50)) as i_size,\ncast(i_formulation as varchar(20)) as i_formulation,\ncast(i_color as varchar(20)) as i_color,\ncast(i_units as varchar(10)) as i_units,\ncast(i_container as varchar(10)) as i_container,\ni_manager_id,\ncast(i_product_name as varchar(50)) as i_product_name\nfrom tpcds.sf10000.item;\n\n\n/* Select from Iceberg table */\n\nselect * from iceberg.iceberg_schema.date_dim limit 10;\nselect * from iceberg.iceberg_schema.item limit 10;\nselect * from iceberg.iceberg_schema.inventory limit 10;\n\n/* Running query from Iceberg table */\n\nwith inv as\n(select w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy\n,stdev,mean, case mean when 0 then null else stdev/mean end cov\nfrom(select w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy\n,stddev_samp(inv_quantity_on_hand) stdev,avg(inv_quantity_on_hand) mean\nfrom iceberg.iceberg_schema.inventory\n,iceberg.iceberg_schema.item\n,iceberg.iceberg_schema.warehouse\n,iceberg.iceberg_schema.date_dim\nwhere inv_item_sk = i_item_sk\nand inv_warehouse_sk = w_warehouse_sk\nand inv_date_sk = d_date_sk\nand d_year =1999\ngroup by w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy) foo\nwhere case mean when 0 then 0 else stdev/mean end > 1)\nselect inv1.w_warehouse_sk,inv1.i_item_sk,inv1.d_moy,inv1.mean, inv1.cov\n,inv2.w_warehouse_sk,inv2.i_item_sk,inv2.d_moy,inv2.mean, inv2.cov\nfrom inv inv1,inv inv2\nwhere inv1.i_item_sk = inv2.i_item_sk\nand inv1.w_warehouse_sk = inv2.w_warehouse_sk\nand inv1.d_moy=4\nand inv2.d_moy=4+1\nand inv1.cov > 1.5\norder by inv1.w_warehouse_sk,inv1.i_item_sk,inv1.d_moy,inv1.mean,inv1.cov,inv2.d_moy,inv2.mean, inv2.cov;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Above SQL commands will execute following actions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create an Iceberg schema named ",(0,r.jsx)(n.code,{children:"iceberg_schema"})]}),"\n",(0,r.jsxs)(n.li,{children:["Create 4 Iceberg tables - ",(0,r.jsx)(n.code,{children:"warehouse"}),", ",(0,r.jsx)(n.code,{children:"item"}),", ",(0,r.jsx)(n.code,{children:"inventory"})," and ",(0,r.jsx)(n.code,{children:"date_dim"})," with data from same tables of tpcds"]}),"\n",(0,r.jsx)(n.li,{children:"Query data from above Iceberg tables"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Let's now execute above SQL commands using Trino CLI:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"envsubst < examples/trino_sf10000_tpcds_to_iceberg.sql > examples/iceberg.sql\n./trino --file 'examples/iceberg.sql' --server http://localhost:8080 --user admin --ignore-errors\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You can see completed and running SQL queries in Trino UI web monitor as below:"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Trino Queries",src:s(25739).Z+"",width:"1323",height:"881"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Let\u2019s open another terminal and see how KEDA is scaling Trino worker pods, when above SQL commands are running:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get hpa -n trino -w\n"})}),"\n",(0,r.jsx)(n.h4,{id:"output-7",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"NAME                                REFERENCE                 TARGETS                MINPODS   MAXPODS   REPLICAS   AGE\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   <unknown>/1, <unknown>/1 + 1 more...   1         15        0          37m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 1/1 + 1 more...                   1         15        1          38m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 500m/1 + 1 more...                1         15        1          40m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        1          40m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        1          40m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        1          40m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        2          41m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        2          41m\nkeda-hpa-keda-scaler-trino-worker   Deployment/trino-worker   0/1, 0/1 + 1 more...                   1         15        2          41m\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can see HPA scaling from initial 0 workers to 2 workers with increasing query load and average cpu utilization of workerss:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Trino Scaling",src:s(39655).Z+"",width:"1177",height:"727"})}),"\n",(0,r.jsx)(n.h3,{id:"example-3-optional-fault-tolerant-execution-in-trino",children:"Example #3 (Optional): Fault-tolerant execution in Trino"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/admin/fault-tolerant-execution.html",children:"Fault-tolerant execution"})," is an opt-in mechanism in Trino that was implemented using ",(0,r.jsx)(n.a,{href:"https://trino.io/blog/2022/05/05/tardigrade-launch.html#what-is-project-tardigrade",children:"Project Tardigrade"}),". Without fault-tolerant configuration, Trino query fails whenever any of the component tasks of the query fails due to any reason (for example, a worker node failure or termination). These failed queries have to be restarted from scratch resulting in longer execution time, compute wastage, and spend, especially for long-running queries."]}),"\n",(0,r.jsxs)(n.p,{children:["When fault-tolerant execution is configured in Trino with a ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/admin/fault-tolerant-execution.html#retry-policy",children:"retry policy"}),", intermediate exchange data is spooled in an external storage like Amazon S3 or HDFS using ",(0,r.jsx)(n.a,{href:"https://trino.io/docs/current/admin/fault-tolerant-execution.html#exchange-manager",children:"exchange manager"}),'. Trino then retries failed query (if retry policy is configured as "QUERY") or failed tasks (if retry policy is configured as "TASK").  Trino\'s remaining workers reuse exchange manager data to retry and complete query in the event of a worker outage or other fault during query execution.']}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"QUERY retry policy"})," instructs Trino to retry whole query when an error occurs on a worker node. It is recommended to use this retry policy when the majority of the workload for the Trino cluster comprises many small queries."]}),(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"TASK retry policy"})," instructs Trino to retry individual tasks in the event of failure. It is recommended to use this policy when Trino executes large batch queries. The cluster can more efficiently retry smaller tasks within the query rather than retry the whole query."]})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This blueprint has deployed Trino cluster with fault-tolerant configuration with a ",(0,r.jsx)(n.code,{children:"TASK"})," retry policy in ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"config.properties"})})," file in coordinator and worker pods. Let's verify that by opening a bash command shell inside coordinator pod:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'COORDINATOR_POD=$(kubectl get pods -l "app.kubernetes.io/instance=trino,app.kubernetes.io/component=coordinator" -o name -n trino)\nkubectl exec --stdin --tty $COORDINATOR_POD -n trino -- /bin/bash\ncat /etc/trino/config.properties\n'})}),"\n",(0,r.jsx)(n.h4,{id:"output-8",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"coordinator=true\nnode-scheduler.include-coordinator=false\nhttp-server.http.port=8080\nquery.max-memory=280GB\nquery.max-memory-per-node=22GB\ndiscovery.uri=http://localhost:8080\nretry-policy=TASK\nexchange.compression-enabled=true\nquery.low-memory-killer.delay=0s\nquery.remote-task.max-error-duration=1m\nquery.hash-partition-count=50\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Blueprint has also configured exchange manager using an Amazon S3 bucket in ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"exchange-manager.properties"})})," file in coordinator and worker pods. Let's also verify that inside coordinator pod"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cat /etc/trino/exchange-manager.properties\n"})}),"\n",(0,r.jsx)(n.h4,{id:"output-9",children:"Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"exchange-manager.name=filesystem\nexchange.base-directories=s3://trino-exchange-bucket-20240215180855570800000004\nexchange.s3.region=us-west-2\nexchange.s3.iam-role=arn:aws:iam::xxxxxxxxxx:role/trino-sa-role\n"})}),"\n",(0,r.jsx)(n.p,{children:"Please note down exchange manager S3 bucket name from above. You can explore contents of above S3 bucket in AWS Console. It will be empty when no query is running."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Now, let's exit from bash shell of the coordinator pod"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"exit\n"})}),"\n",(0,r.jsxs)(n.p,{children:["With below steps, we will now test fault-tolerant execution by running a ",(0,r.jsx)(n.code,{children:"select"})," query and terminate few Trino workers when query is still running."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Find the file ",(0,r.jsx)(n.code,{children:"trino_select_query_iceberg.sql"})," file in the ",(0,r.jsx)(n.code,{children:"examples"})," folder, which contains the SQL commands below:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"with inv as\n(select w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy\n,stdev,mean, case mean when 0 then null else stdev/mean end cov\nfrom(select w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy\n,stddev_samp(inv_quantity_on_hand) stdev,avg(inv_quantity_on_hand) mean\nfrom iceberg.iceberg_schema.inventory\n,iceberg.iceberg_schema.item\n,iceberg.iceberg_schema.warehouse\n,iceberg.iceberg_schema.date_dim\nwhere inv_item_sk = i_item_sk\nand inv_warehouse_sk = w_warehouse_sk\nand inv_date_sk = d_date_sk\nand d_year =1999\ngroup by w_warehouse_name,w_warehouse_sk,i_item_sk,d_moy) foo\nwhere case mean when 0 then 0 else stdev/mean end > 1)\nselect inv1.w_warehouse_sk,inv1.i_item_sk,inv1.d_moy,inv1.mean, inv1.cov\n,inv2.w_warehouse_sk,inv2.i_item_sk,inv2.d_moy,inv2.mean, inv2.cov\nfrom inv inv1,inv inv2\nwhere inv1.i_item_sk = inv2.i_item_sk\nand inv1.w_warehouse_sk = inv2.w_warehouse_sk\nand inv1.d_moy=4\nand inv2.d_moy=4+1\nand inv1.cov > 1.5\norder by inv1.w_warehouse_sk,inv1.i_item_sk,inv1.d_moy,inv1.mean,inv1.cov,inv2.d_moy,inv2.mean, inv2.cov;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Let's now run select query first"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./trino --file 'examples/trino_select_query_iceberg.sql' --server http://localhost:8080 --user admin --ignore-errors\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Immediately after above command, when above query is still running, open another terminal and scale down worker pods to just 1 worker, terminating all other workers with command below:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl scale deployment trino-worker -n trino --replicas=1\n"})}),"\n",(0,r.jsx)(n.p,{children:"See Trino Web UI on browser and there is only 1 active worker running now as other workers are terminated:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Terminated workers",src:s(80724).Z+"",width:"1401",height:"777"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to Amazon S3 console and verify intermediate exchange data spooling in exchange manager S3 bucket with a name starting with ",(0,r.jsx)(n.code,{children:"trino-exchange-bucket"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Exchange manager",src:s(2046).Z+"",width:"910",height:"765"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Let's now see Trino Web UI monitor again to verify completion of the query despite of 6 failed tasks due to terminated workers (we have encircled them in RED in the screenshot below)."}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"Please note, number of failed tasks could be different in your Trino Web UI depending upon how many tasks were running on workers that got terminated."}),(0,r.jsx)(n.p,{children:"Also you can see different number of active workers depending upon worker pods scaled by Horizontal Pod Autoscaler(HPA) using cpu utilization metric"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Trino query completion",src:s(48190).Z+"",width:"1425",height:"779"})}),"\n",(0,r.jsx)(n.h4,{id:"cleaning-up-iceberg-resources",children:"Cleaning Up Iceberg Resources"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Let's open Trino CLI"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./trino http://127.0.0.1:8080 --user admin\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Now, let's delete Iceberg tables and schema by running below SQL commands on Trino CLI:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"drop table iceberg.iceberg_schema.warehouse;\ndrop table iceberg.iceberg_schema.item;\ndrop table iceberg.iceberg_schema.inventory;\ndrop table iceberg.iceberg_schema.date_dim;\ndrop schema iceberg.iceberg_schema;\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["Exit from Trino CLI with ",(0,r.jsx)(n.code,{children:"exit"})," command."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cleanup-",children:"Cleanup \uD83E\uDDF9"}),"\n",(0,r.jsx)(n.p,{children:"To delete all the components provisioned as part of this blueprint, using the following command to destroy all the resources."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd data-on-eks/distributed-databases/trino\n./cleanup.sh\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.p,{children:"To avoid unwanted charges to your AWS account, delete all the AWS resources created during this deployment"}),(0,r.jsx)(n.p,{children:"ex. S3 buckets for Trino Exchange manager"})]}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"Trino is a tool for fast querying vast amounts of data from your data sources.In this example, we shared a terraform based blueprint that deploys Trino with fault-tolerant configuration on Amazon EKS, with add-ons necessary to build a complete EKS cluster (i.e. Karpenter for node autoscaling, Metrics server and HPA for Trino worker pods autoscaling, monitoring with Prometheus/Grafana stack). Among many features, we highlighted a couple of examples on creating an Iceberg or Hive data store using Amazon S3 as storage, and running simple Trino queries for results. We also deployed and scaled Trino workers on Spot instances for cost optimization. We also demonstrated fault-tolerant feature of Trino, which makes it suitable for Spot instances to save costs for long-running batch queries."})]})}function h(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2046:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-exchange-manager-c5bcae7d73c134f3b2ef63a3556dc7e2.png"},48190:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-ft-query-completion-6ea7e16b71d58da2e8fdc8639de62fac.png"},80724:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-ft-terminated-workers-21fd4be7a3bf884adb75e591d122a33e.png"},25739:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-queries-726f33f8830f9fddb3c2f426486ce601.PNG"},31950:function(e,n,s){s.d(n,{Z:()=>i});let i="data:image/png;base64,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"},5964:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-ui-5e81c81fa39c68b3ba02a0a3b0d09383.PNG"},39655:function(e,n,s){s.d(n,{Z:()=>i});let i=s.p+"assets/images/trino-workers-scaling-ef8ee4aec254bec584805aab502b9077.png"},50065:function(e,n,s){s.d(n,{Z:()=>o,a:()=>a});var i=s(67294);let r={},t=i.createContext(r);function a(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);