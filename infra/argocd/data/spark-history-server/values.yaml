# Spark History Server - Base Configuration (KubedAI chart v1.5.1)
# This provides base values that can be overridden by blueprints

spark-history-server:
  # Image configuration
  image:
    repository: apache/spark
    tag: "3.5.3"
    pullPolicy: IfNotPresent

  # Service configuration
  service:
    type: ClusterIP
    port: 18080

  # Resources - conservative defaults
  resources:
    requests:
      cpu: 100m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

  # Pod annotations for monitoring
  podAnnotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "18080"

  # Security context
  securityContext:
    runAsNonRoot: true
    runAsUser: 185
    fsGroup: 65534

  # Spark History Server configuration
  sparkHistoryOpts: "-Dspark.history.fs.logDirectory=s3a://{{ .Values.global.s3BucketName }}/spark-event-logs/"

  # Environment variables
  env:
    - name: AWS_REGION
      value: "{{ .Values.global.region }}"

  # Service Account (Pod Identity will be configured)
  serviceAccount:
    create: true
    annotations: {}

  # Node placement
  nodeSelector:
    kubernetes.io/arch: "amd64"

  tolerations: []
  affinity: {}

# Global values that can be overridden
global:
  clusterName: ""
  environment: "dev"
  region: ""
  s3BucketName: ""
