<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blueprints/streaming-platforms/nifi" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Apache NiFi on EKS | Data on EKS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/data-on-eks/docs/blueprints/streaming-platforms/nifi"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Apache NiFi on EKS | Data on EKS"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/data-on-eks/img/header-icon.png"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/data-on-eks/docs/blueprints/streaming-platforms/nifi"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/data-on-eks/docs/blueprints/streaming-platforms/nifi" hreflang="en"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/data-on-eks/docs/blueprints/streaming-platforms/nifi" hreflang="x-default"><link rel="stylesheet" href="/data-on-eks/assets/css/styles.264cfa7d.css">
<script src="/data-on-eks/assets/js/runtime~main.734b7c94.js" defer="defer"></script>
<script src="/data-on-eks/assets/js/main.1296aa6f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/data-on-eks/"><div class="navbar__logo"><img src="/data-on-eks/img/header-icon.png" alt="DoEKS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/data-on-eks/img/header-icon.png" alt="DoEKS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link navbar-highlight-link" href="/data-on-eks/docs/migration/migration-announcement">🚨 Repo Split Update</a><a class="navbar__item navbar__link" href="/data-on-eks/docs/introduction/intro">Introduction</a><a class="navbar__item navbar__link" href="/data-on-eks/docs/gen-ai">AI on EKS (🚨 Moving)</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/data-on-eks/docs/blueprints/amazon-emr-on-eks">Blueprints</a><a class="navbar__item navbar__link" href="/data-on-eks/docs/bestpractices/intro">Best Practices</a><a class="navbar__item navbar__link" href="/data-on-eks/docs/benchmarks/emr-on-eks">Benchmarks</a><a class="navbar__item navbar__link" href="/data-on-eks/docs/resources/intro">Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/awslabs/data-on-eks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-on-eks/docs/category/aiml-on-eks">AI/ML on EKS</a><button aria-label="Expand sidebar category &#x27;AI/ML on EKS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-on-eks/docs/category/data-analytics-on-eks">Data Analytics on EKS</a><button aria-label="Expand sidebar category &#x27;Data Analytics on EKS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-on-eks/docs/category/amazon-emr-on-eks">Amazon EMR on EKS</a><button aria-label="Expand sidebar category &#x27;Amazon EMR on EKS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/data-on-eks/docs/category/streaming-platforms-on-eks">Streaming Platforms on EKS</a><button aria-label="Collapse sidebar category &#x27;Streaming Platforms on EKS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/emr-eks-stream">EMR on EKS with Spark Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/emr-eks-flink">EMR on EKS with Flink Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/flink">Flink Operator on EKS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/kafka">Kafka on EKS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/nifi">Apache NiFi on EKS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-on-eks/docs/blueprints/streaming-platforms/spark-streaming">Spark Streaming from Kafka in EKS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-on-eks/docs/category/job-schedulers-on-eks">Job Schedulers on EKS</a><button aria-label="Expand sidebar category &#x27;Job Schedulers on EKS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-on-eks/docs/category/distributed-databases-on-eks">Distributed Databases on EKS</a><button aria-label="Expand sidebar category &#x27;Distributed Databases on EKS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/data-on-eks/docs/blueprints/troubleshooting">Troubleshooting</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/data-on-eks/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/data-on-eks/docs/category/streaming-platforms-on-eks"><span itemprop="name">Streaming Platforms on EKS</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Apache NiFi on EKS</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Apache NiFi on EKS</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Apache NiFi is an open-source data integration and management system designed to automate and manage the flow of data between systems. It provides a web-based user interface for creating, monitoring, and managing data flows in real-time.</p>
<p>With its powerful and flexible architecture, Apache NiFi can handle a wide range of data sources, cloud platforms, and formats, including structured and unstructured data, and can be used for a variety of data integration scenarios, such as data ingest, data processing (low to medium level), data routing, data transformation, and data dissemination.</p>
<p>Apache NiFi provides a GUI based interface for building and managing data flows, making it easier for non-technical users. It also offers robust security features, including SSL, SSH, and fine-grained access control, to ensure the safe and secure transfer of sensitive data. Whether you are a data analyst, a data engineer, or a data scientist, Apache NiFi provides a comprehensive solution for managing and integrating your data on AWS and other platforms.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This blueprint should be considered as experimental and should only be used for proof of concept.</p></div></div>
<p>This <a href="https://github.com/awslabs/data-on-eks/tree/main/streaming-platforms/nifi" target="_blank" rel="noopener noreferrer">example</a> deploys an EKS Cluster running the Apache NiFi cluster. In the example, Apache NIfi is streaming data from the AWS Kinesis Data Stream to an Amazon DynamoDB table after some format transformation.</p>
<ul>
<li>Creates a new sample VPC, 3 Private Subnets and 3 Public Subnets</li>
<li>Creates Internet gateway for Public Subnets and NAT Gateway for Private Subnets</li>
<li>Creates EKS Cluster Control plane with public endpoint (for demo reasons only) with one managed node group</li>
<li>Deploys Apache NiFi, AWS Load Balancer Controller, Cert Manager and External DNS (optional) add-ons</li>
<li>Deploys Apache NiFi cluster in the <code>nifi</code> namespace</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>Ensure that you have installed the following tools on your machine.</p>
<ol>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noopener noreferrer">aws cli</a></li>
<li><a href="https://Kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">kubectl</a></li>
<li><a href="https://learn.hashicorp.com/tutorials/terraform/install-cli" target="_blank" rel="noopener noreferrer">terraform</a></li>
<li><a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq</a></li>
</ol>
<p>Additionally, for end-to-end configuration of Ingress, you will need to provide the following:</p>
<ol>
<li>A <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/dns-configuring.html" target="_blank" rel="noopener noreferrer">Route53 Public Hosted Zone</a> configured in the account where you are deploying this example. E.g. &quot;example.com&quot;</li>
<li>An <a href="https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-request-public.html" target="_blank" rel="noopener noreferrer">ACM Certificate</a> in the account + region where you are deploying this example. A wildcard certificate is preferred, e.g. &quot;*.example.com&quot;</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-eks-cluster-with-apache-nifi">Deploy the EKS Cluster with Apache NiFi<a href="#deploy-the-eks-cluster-with-apache-nifi" class="hash-link" aria-label="Direct link to Deploy the EKS Cluster with Apache NiFi" title="Direct link to Deploy the EKS Cluster with Apache NiFi">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clone-the-repository">Clone the repository<a href="#clone-the-repository" class="hash-link" aria-label="Direct link to Clone the repository" title="Direct link to Clone the repository">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/awslabs/data-on-eks.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-terraform">Initialize Terraform<a href="#initialize-terraform" class="hash-link" aria-label="Direct link to Initialize Terraform" title="Direct link to Initialize Terraform">​</a></h3>
<p>Navigate into the example directory and run <code>terraform init</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd data-on-eks/streaming/nifi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-plan">Terraform Plan<a href="#terraform-plan" class="hash-link" aria-label="Direct link to Terraform Plan" title="Direct link to Terraform Plan">​</a></h3>
<p>Run Terraform plan to verify the resources created by this execution.</p>
<p>Provide a Route53 Hosted Zone hostname and a corresponding ACM Certificate;</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export TF_VAR_eks_cluster_domain=&quot;&lt;CHANGEME - example.com&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export TF_VAR_acm_certificate_domain=&quot;&lt;CHANGEME - *.example.com&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export TF_VAR_nifi_sub_domain=&quot;nifi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export TF_VAR_nifi_username=&quot;admin&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-pattern">Deploy the pattern<a href="#deploy-the-pattern" class="hash-link" aria-label="Direct link to Deploy the pattern" title="Direct link to Deploy the pattern">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enter <code>yes</code> to apply.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Outputs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configure_kubectl = &quot;aws eks --region us-west-2 update-kubeconfig --name nifi-on-eks&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-deployment">Verify Deployment<a href="#verify-deployment" class="hash-link" aria-label="Direct link to Verify Deployment" title="Direct link to Verify Deployment">​</a></h3>
<p>Update kubeconfig</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws eks --region us-west-2 update-kubeconfig --name nifi-on-eks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verify all pods are running.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE           NAME                                                         READY   STATUS    RESTARTS      AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amazon-cloudwatch   aws-cloudwatch-metrics-7fbcq                                 1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amazon-cloudwatch   aws-cloudwatch-metrics-82c9v                                 1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amazon-cloudwatch   aws-cloudwatch-metrics-blrmt                                 1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amazon-cloudwatch   aws-cloudwatch-metrics-dhpl7                                 1/1     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">amazon-cloudwatch   aws-cloudwatch-metrics-hpw5k                                 1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cert-manager        cert-manager-7d57b6576b-c52dw                                1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cert-manager        cert-manager-cainjector-86f7f4749-hs7d9                      1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cert-manager        cert-manager-webhook-66c85f8577-rxms8                        1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">external-dns        external-dns-57bb948d75-g8kbs                                1/1     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grafana             grafana-7f5b7f5d4c-znrqk                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-load-balancer-controller-7ff998fc9b-86gql                1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-load-balancer-controller-7ff998fc9b-hct9k                1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-node-4gcqk                                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-node-4sssk                                               1/1     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-node-4t62f                                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-node-g4ndt                                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         aws-node-hlxmq                                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         cluster-autoscaler-aws-cluster-autoscaler-7bd6f7b94b-j7td5   1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         cluster-proportional-autoscaler-coredns-6ccfb4d9b5-27xsd     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         coredns-5c5677bc78-rhzkx                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         coredns-5c5677bc78-t7m5z                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-controller-87c4ff9d4-ffmwh                           6/6     Running   6 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-controller-87c4ff9d4-nfw28                           6/6     Running   6 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-node-4mkc8                                           3/3     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-node-74xqs                                           3/3     Running   3 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-node-8cw8t                                           3/3     Running   3 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-node-cs9wp                                           3/3     Running   3 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         ebs-csi-node-ktdb7                                           3/3     Running   3 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         kube-proxy-4s72m                                             1/1     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         kube-proxy-95ptn                                             1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         kube-proxy-bhrdk                                             1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         kube-proxy-nzvb6                                             1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         kube-proxy-q9xkc                                             1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         metrics-server-fc87d766-dd647                                1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system         metrics-server-fc87d766-vv8z9                                1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging             aws-for-fluent-bit-b5vqg                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging             aws-for-fluent-bit-pklhr                                     1/1     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging             aws-for-fluent-bit-rq2nc                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging             aws-for-fluent-bit-tnmtl                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging             aws-for-fluent-bit-zzhfc                                     1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-0                                                       5/5     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-1                                                       5/5     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-2                                                       5/5     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-registry-0                                              1/1     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-zookeeper-0                                             1/1     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-zookeeper-1                                             1/1     Running   0             41h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nifi                nifi-zookeeper-2                                             1/1     Running   0             18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-alertmanager-655fcb46df-2qh8h                     2/2     Running   2 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-kube-state-metrics-549f6d74dd-wwhtr               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-node-exporter-5cpzk                               1/1     Running   0             19h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-node-exporter-8jhbk                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-node-exporter-nbd42                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-node-exporter-str6t                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-node-exporter-zkf5s                               1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-pushgateway-677c6fdd5-9tqkl                       1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus          prometheus-server-7bf9cbb9cf-b2zgl                           2/2     Running   2 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vpa                 vpa-recommender-7c6bbb4f9b-rjhr7                             1/1     Running   1 (43h ago)   2d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vpa                 vpa-updater-7975b9dc55-g6zf6                                 1/1     Running   1 (43h ago)   2d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="apache-nifi-ui">Apache NiFi UI<a href="#apache-nifi-ui" class="hash-link" aria-label="Direct link to Apache NiFi UI" title="Direct link to Apache NiFi UI">​</a></h4>
<p>The Apache NiFi Dashboard can be opened at the following url &quot;<a href="https://nifi.example.com/nifi" target="_blank" rel="noopener noreferrer">https://nifi.example.com/nifi</a>&quot;</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Login" src="/data-on-eks/assets/images/nifi-a79017d2a2a850f40a2e1ec172af3203.png" width="579" height="336" class="img_ev3q"></p>
<p>Run the command below to retrieve NiFi user&#x27;s password and default username as <code>admin</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws secretsmanager get-secret-value --secret-id &lt;nifi_login_password_secret_name from terraform outputs&gt; --region &lt;region&gt; | jq &#x27;.SecretString&#x27; --raw-output</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-canvas-bba0ebcd97e50d3429571d813d3be3ee.png" width="1075" height="676" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">Monitoring<a href="#monitoring" class="hash-link" aria-label="Direct link to Monitoring" title="Direct link to Monitoring">​</a></h3>
<p>Apache Nifi can be monitored using metrics reported by PrometheusReportingTask. JVM metrics are disabled by default, let&#x27;s enable the JVM metrics by navigating to Controller Settings by the clicking on the hamburger icon (three horizontal bars) in the top right corner.</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Controller Settings" src="/data-on-eks/assets/images/nifi-controller-settings-2322ed628f3dad48918c935d7c0867da.png" width="900" height="649" class="img_ev3q"></p>
<p>Next click on the <code>REPORTING TASK</code> tab and then click the <code>+</code> icon and search for <code>PrometheusReportingTask</code> in the filter. Select the <code>PrometheusReportingTask</code> and click <code>ADD</code> button.</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Prometheus Reporting" src="/data-on-eks/assets/images/nifi-prometheus-reporting-0693c3b9813544b018f7e27c2c5516d1.png" width="898" height="650" class="img_ev3q"></p>
<p>The prometheus reporting task is stopped by default.</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Reporting Task Edit" src="/data-on-eks/assets/images/nifi-reporting-task-edit-03b1f21f3bcaa5385da9df446a8ce818.png" width="897" height="650" class="img_ev3q"></p>
<p>Click on the pencil icon to edit the task and click on the PROPERTIES tab. Set the <code>Send JVM metrics</code> to <code>true</code> and click on Apply. Start the task by clicking on the play icon and ensure it&#x27;s in running state.</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Reporting Task True" src="/data-on-eks/assets/images/nifi-reporting-task-true-66089a1fe60f6a1041b3ab53df2df953.png" width="1132" height="697" class="img_ev3q"></p>
<p>This blueprint uses the <code>prometheus</code> and <code>grafana</code> to create a monitoring stack for getting visibility into your Apache NiFi cluster.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws secretsmanager get-secret-value --secret-id &lt;grafana_secret_name from terraform outputs&gt; --region &lt;region&gt; | jq &#x27;.SecretString&#x27; --raw-output</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the command below and open the Grafana dashboard using the url &quot;<a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>&quot;.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward svc/grafana -n grafana 8080:80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Import Apache NiFi <a href="https://grafana.com/grafana/dashboards/12314-nifi-prometheusreportingtask-dashboard/" target="_blank" rel="noopener noreferrer">Grafana dashboard</a></p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Grafana Dashboard" src="/data-on-eks/assets/images/nifi-grafana-9c3fb026856953e19d65908eb53098d3.png" width="1539" height="913" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-iam-policies-for-accessing-amazon-dynamodb-and-aws-kinesis">Create IAM policies for accessing Amazon DynamoDB and AWS Kinesis<a href="#create-iam-policies-for-accessing-amazon-dynamodb-and-aws-kinesis" class="hash-link" aria-label="Direct link to Create IAM policies for accessing Amazon DynamoDB and AWS Kinesis" title="Direct link to Create IAM policies for accessing Amazon DynamoDB and AWS Kinesis">​</a></h4>
<ol>
<li>
<p>Create an AWS IAM role: Create an AWS IAM role with permissions to access the AWS Kinesis data stream and assign this role to the AWS EKS cluster hosting Apache NiFi.</p>
</li>
<li>
<p>Attach the IAM policy: Attach a policy to the IAM role that limits access to the Kinesis data stream to read-only and IAM policy to enable EKS role to write Amazon DynamoDB table. Here&#x27;s an example policy:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Statement&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Sid&quot;: &quot;Nifi-access-to-Kinesis&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kinesis:DescribeStream&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kinesis:GetRecords&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kinesis:GetShardIterator&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kinesis:ListStreams&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Resource&quot;: &quot;arn:aws:kinesis:&lt;REGION&gt;:&lt;ACCOUNT-ID&gt;:stream/kds-stream-nifi-on-EKS&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Sid&quot;: &quot;DynamoDBTableAccess&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:BatchGetItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:BatchWriteItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:ConditionCheckItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:PutItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:DescribeTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:DeleteItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:GetItem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:Scan&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:Query&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dynamodb:UpdateItem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Resource&quot;: &quot;arn:aws:dynamodb:&lt;REGION&gt;:&lt;ACCOUNT-ID&gt;:table/NifiStreamingTable&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-aws-kinesis-data-stream">Create AWS Kinesis Data Stream<a href="#create-aws-kinesis-data-stream" class="hash-link" aria-label="Direct link to Create AWS Kinesis Data Stream" title="Direct link to Create AWS Kinesis Data Stream">​</a></h4>
<ol start="3">
<li>Create an AWS Kinesis data stream: Log in to the AWS Management Console, and create a Kinesis data stream in the region where you want to collect your data or use the below command line to create one.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws kinesis create-stream --stream-name kds-stream-nifi-on-EKS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-amazon-dynamodb-table">Create Amazon DynamoDB table<a href="#create-amazon-dynamodb-table" class="hash-link" aria-label="Direct link to Create Amazon DynamoDB table" title="Direct link to Create Amazon DynamoDB table">​</a></h4>
<ol start="4">
<li>Create a Amazon DynamoDB in the same AWS Account using the AWS console or the command line. Create a JSON file with Amazon DynamoDb table information called JSONSchemaDynamoDBTABLE.json</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;TableName&quot;: &quot;NifiStreamingTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KeySchema&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Name&quot;, &quot;KeyType&quot;: &quot;HASH&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Age&quot;, &quot;KeyType&quot;: &quot;RANGE&quot; }},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Location&quot;, &quot;KeyType&quot;: &quot;RANGE&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;AttributeDefinitions&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Name&quot;, &quot;KeyType&quot;: &quot;S&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Age&quot;, &quot;KeyType&quot;: &quot;S&quot; }},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;AttributeName&quot;: &quot;Location&quot;, &quot;KeyType&quot;: &quot;S&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ProvisionedThroughput&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ReadCapacityUnits&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;WriteCapacityUnits&quot;: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Execute the command line to create the Amazon DynamoDB table from the JSON file.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws dynamodb create-table --cli-input-json  JSONSchemaDynamoDBTABLE.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="6">
<li>Open the Apache Nifi on the EKS UI using the endpoint, create a process group, and name it NifiStreamingExample.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-1-be862777c17ed6c9fb024df6635827d6.png" width="1266" height="376" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-2-700ad5636868aab82dbd4e2289d985a9.png" width="1130" height="636" class="img_ev3q"></p>
<ol start="7">
<li>Double-click on the Nifi-on-EKS-process-group and enter the process to create the data flow. Drag the processor icon from the top left, type Kinesis into the search window, and select the ConsumeKinesisStream processor. To create a Kinesis Consumer, click ADD. </li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-3-9654b1b59d00543d7652828eab77dde0.png" width="798" height="721" class="img_ev3q"></p>
<ol start="8">
<li>Double click on the Kinesis processor, select the properties tab, and fill in the information for the configuration below.
a. Amazon Kinesis Stream Name
b. Application Name
c. Region
d. AWS Credentials Provider Service - Select AWSCredentialsProviderControllerService and create one.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-4-d2d60f9ee74d459e8b4578cbeb1b5b31.png" width="1420" height="802" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-aws-credential-setup">Create AWS credential setup<a href="#create-aws-credential-setup" class="hash-link" aria-label="Direct link to Create AWS credential setup" title="Direct link to Create AWS credential setup">​</a></h4>
<ol start="9">
<li>Setup the AWS credentials to access the AWS resource in the account using the AWS Credentials Provider Service. In this example, we are using the access key and secret key. <em><strong>Note</strong> : Other options are IAM role-based, assumed role options to authenticate an AWS resources.</em></li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-5-96d58a1454311a411935d68c7913cb32.png" width="2520" height="323" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-6-4529127e639038e6cee82d4f494a9191.png" width="802" height="658" class="img_ev3q"></p>
<ol start="10">
<li>Drag the processor icon from the top left, type &quot;dynamoDB&quot; into the search window, and select the &quot;PutDynamoDBRecord processor. Click on ADD to create an Amazon DynamoDB writer. Configure the processor using the fields below.</li>
</ol>
<p>a. Record Reader - Change it to JSONTreeReader
b. AWS Credentials Provider Service - select the previously created configuration
c. Region
b. Table Name
d. Partition Key Field - select the partition field</p>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-7-2db4a3c85f11f2cb1d87a9043246b3a5.png" width="1599" height="479" class="img_ev3q">
<img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-8-bbc4049a1b46e3d15015382aae6c3380.png" width="1408" height="795" class="img_ev3q">
<img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-9-3c36bc1b64419512e2f7768fc4488498.png" width="686" height="406" class="img_ev3q"></p>
<ol start="11">
<li>Hover over the Kinesis consumer and drag it to the DynamoDB writer. The connection will be made, and the success queue will be created.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-10-0bc436d1f5724755a18153a1d962ae4b.png" width="714" height="370" class="img_ev3q"></p>
<ol start="12">
<li>For the Kinesis Consumer and DynamoDB, create an error route to a funnel. This is to route the unprocessed, failed, and successful records for further processing. Note: Under the Relationship tab, you can see all the options for each processor. For the DynamoDB writer, success should always point to a funnel.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Apache NiFi Canvas" src="/data-on-eks/assets/images/nifi-screenshot-11-6f7384af94573f6e71676bd222b0fb68.png" width="2029" height="787" class="img_ev3q"></p>
<ol start="13">
<li>Check that none of the processors have any Hazard symbols. Right-click on the grid and click &quot;run the data flow.&quot; You can start seeing the data flowing in.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cleanup">Cleanup<a href="#cleanup" class="hash-link" aria-label="Direct link to Cleanup" title="Direct link to Cleanup">​</a></h2>
<p>To clean up your environment, destroy the Terraform modules in reverse order.</p>
<p>Destroy the Kubernetes Add-ons, EKS cluster with Node groups and VPC</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy -target=&quot;module.eks_blueprints_kubernetes_addons&quot; --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy -target=&quot;module.eks&quot; --auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy -target=&quot;module.vpc&quot; --auto-approve</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, destroy any additional resources that are not in the above modules</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy --auto-approve</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/awslabs/data-on-eks/blob/main/website/docs/blueprints/streaming-platforms/nifi.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/data-on-eks/docs/blueprints/streaming-platforms/kafka"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kafka on EKS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/data-on-eks/docs/blueprints/streaming-platforms/spark-streaming"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spark Streaming from Kafka in EKS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#deploy-the-eks-cluster-with-apache-nifi" class="table-of-contents__link toc-highlight">Deploy the EKS Cluster with Apache NiFi</a><ul><li><a href="#clone-the-repository" class="table-of-contents__link toc-highlight">Clone the repository</a></li><li><a href="#initialize-terraform" class="table-of-contents__link toc-highlight">Initialize Terraform</a></li><li><a href="#terraform-plan" class="table-of-contents__link toc-highlight">Terraform Plan</a></li><li><a href="#deploy-the-pattern" class="table-of-contents__link toc-highlight">Deploy the pattern</a></li><li><a href="#verify-deployment" class="table-of-contents__link toc-highlight">Verify Deployment</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">Cleanup</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get Started</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/data-on-eks/docs/introduction/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Get Involved</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/data-on-eks" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS  <br> © 2025 Amazon.com, Inc. or its affiliates. All Rights Reserved</div></div></div></footer><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;7fbc7ab02fae4767b1af2588eba0cdf2&quot;}"></script></div>
</body>
</html>